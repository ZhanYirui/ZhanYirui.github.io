<!DOCTYPE html>
<html lang="en" dir="ltr" class="scroll-smooth" data-default-appearance="dark"
  data-auto-appearance="true"><head>
  <meta charset="utf-8" />
  
  <meta http-equiv="content-language" content="en" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>编译原理上机（一) - 词法分析器 &middot; Enly</title>
  <meta name="title" content="编译原理上机（一) - 词法分析器 &middot; Enly" />
  
  <meta name="description" content="编译原理上机 - 词法分析器" />
  <meta name="keywords" content="编译原理, " />
  
  
  <link rel="canonical" href="https://www.enly.site/blogs/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E4%B8%8A%E6%9C%BA%E4%B8%80/" />
  
  
  
  
  
  
  
  
  
  
  
  
  <link type="text/css" rel="stylesheet" href="/css/main.bundle.min.428414a4b6f4a241cf5eeb576f34f8cdd0d2fbf5415c89505ce3a1afd48b81247481130d981a86a2ee88fa0981bbbdc21417ffeba95490d6cb009b223ae72f3e.css"
    integrity="sha512-QoQUpLb0okHPXutXbzT4zdDS&#43;/VBXIlQXOOhr9SLgSR0gRMNmBqGou6I&#43;gmBu73CFBf/66lUkNbLAJsiOucvPg==" />
  
  
  <script type="text/javascript" src="/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js"
    integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj&#43;e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script>
  
  
  
  
  
  
  
  
  <script defer type="text/javascript" id="script-bundle" src="/js/main.bundle.min.b89ac69ff9802fd5418564a45dada46f018c4ac81ae1bf932b5b6592063cf05a524e658c0ed84f3b96023c793cc651ac796e79381a45512a08354ba66739c767.js"
    integrity="sha512-uJrGn/mAL9VBhWSkXa2kbwGMSsga4b&#43;TK1tlkgY88FpSTmWMDthPO5YCPHk8xlGseW55OBpFUSoINUumZznHZw==" data-copy="" data-copied=""></script>
  
  
  <script src="/js/zoom.min.js"></script>
  
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  <meta property="og:url" content="https://www.enly.site/blogs/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E4%B8%8A%E6%9C%BA%E4%B8%80/">
  <meta property="og:site_name" content="Enly">
  <meta property="og:title" content="编译原理上机（一) - 词法分析器">
  <meta property="og:description" content="编译原理上机 - 词法分析器">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blogs">
    <meta property="article:published_time" content="2022-11-19T00:00:00+00:00">
    <meta property="article:modified_time" content="2022-11-19T00:00:00+00:00">
    <meta property="article:tag" content="编译原理">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="编译原理上机（一) - 词法分析器">
  <meta name="twitter:description" content="编译原理上机 - 词法分析器">

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Blogs",
    "name": "编译原理上机（一) - 词法分析器",
    "headline": "编译原理上机（一) - 词法分析器",
    "description": "编译原理上机 - 词法分析器",
    "abstract": "西电编译原理大作业 - 函数绘图语言编译器C\u002b\u002b实现 - Part 1 - 词法分析器",
    "inLanguage": "en",
    "url" : "https:\/\/www.enly.site\/blogs\/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E4%B8%8A%E6%9C%BA%E4%B8%80\/",
    "author" : {
      "@type": "Person",
      "name": "Enly"
    },
    "copyrightYear": "2022",
    "dateCreated": "2022-11-19T00:00:00\u002b00:00",
    "datePublished": "2022-11-19T00:00:00\u002b00:00",
    
    "dateModified": "2022-11-19T00:00:00\u002b00:00",
    
    "keywords": ["编译原理"],
    
    "mainEntityOfPage": "true",
    "wordCount": "1529"
  }]
  </script>


  
  
  <meta name="author" content="Enly" />
  
  
  
  <link href="https://github.com/ZhanYirui" rel="me" />
  
  
  <link href="mailto:zhanyirui031113@gmail.com" rel="me" />
  
  
  <link href="https://p.ipic.vip/5bwidi.jpg" rel="me" />
  
  
  <link href="https://p.ipic.vip/skb3oh.jpg" rel="me" />
  
  
  <link href="https://www.youtube.com/@ZhanYirui" rel="me" />
  
  
  <link href="https://www.douyin.com/user/MS4wLjABAAAA2CjxDIiYv7albPRm4M0PSkjt_m77O-fVMoXv6tYOcKk" rel="me" />
  
  
  
  

<script src="/lib/jquery/jquery.slim.min.js" integrity=""></script>





















  
  


  
  
  <meta name="theme-color"/>
  
  
</head>
<body
  class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32">
  <div id="the-top" class="absolute flex self-center">
    <a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
      href="#main-content"><span
        class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a>
  </div>
  
  
  <div class="min-h-[148px]"></div>
<div class="fixed inset-x-0 pl-[24px] pr-[24px]" style="z-index:100">
  <div id="menu-blur" class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl"></div>
  <div class="relative max-w-[64rem] ml-auto mr-auto">
    <div style="padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px"
    class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3">
    
    
    
    <div>
        <a href="/" class="flex">
            <span class="sr-only">Enly</span>

            <img src="/img/apple-touch-icon.png" width="90" height="90"
                class="logo max-h-[5rem] max-w-[5rem] object-scale-down object-left nozoom" alt="Enly" />

        </a>
    </div>
    
    <div class="flex flex-1 items-center justify-between">
        <nav class="flex space-x-3">

            
            <a href="/" class="text-base font-medium text-gray-500 hover:text-gray-900">Enly</a>
            

        </nav>
        <nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12">

            
            
            
  <a href="/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-base font-medium" title="">
        Home
    </p>
</a>


            
            
  <a href="/blogs/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-base font-medium" title="">
        Blogs
    </p>
</a>


            
            
  <a href="/about/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <p class="text-base font-medium" title="">
        About
    </p>
</a>


            
            
  <a href="https://github.com/ZhanYirui"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <span >
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>


    </span>
    
    <p class="text-base font-medium" title="">
        
    </p>
</a>


            
            
  <a href="mailto:zhanyirui031113@gmail.com"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
    <span >
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48H48zM0 176V384c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V176L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"/></svg>
  </span>


    </span>
    
    <p class="text-base font-medium" title="">
        
    </p>
</a>


            
            

            


            


            
            
            <div
                class="ltr:mr-14 rtl:ml-14 flex items-center">
                <button id="appearance-switcher" aria-label="Dark mode switcher" type="button" class="text-base hover:text-primary-600 dark:hover:text-primary-400">
                    <div class="flex items-center justify-center dark:hidden">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                    </div>
                    <div class="items-center justify-center hidden dark:flex">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                    </div>
                </button>
            </div>
            

        </nav>
        <div class="flex md:hidden items-center space-x-5 md:ml-12 h-12">

            <span></span>

            


            

            
            
            <button id="appearance-switcher-mobile" aria-label="Dark mode switcher" type="button" class="text-base hover:text-primary-600 dark:hover:text-primary-400" style="margin-right:5px">
                <div class="flex items-center justify-center dark:hidden">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                </div>
                <div class="items-center justify-center hidden dark:flex">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                </div>
            </button>
            

        </div>
    </div>
    <div class="-my-2 -mr-2 md:hidden">

        <label id="menu-button" for="menu-controller" class="block">
            <input type="checkbox" id="menu-controller" class="hidden" />
            
            <div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
                

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>

  </span>


            </div>
            <div id="menu-wrapper" style="padding-top:5px;"
                class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50">
                <ul
                    class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl">

                    <li>
                        <span
                            class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>

</span>
                    </li>

                    

                    
  <li class="mt-1">
    <a href="/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="">
            Home
        </p>
    </a>
</li>



                    

                    
  <li class="mt-1">
    <a href="/blogs/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="">
            Blogs
        </p>
    </a>
</li>



                    

                    
  <li class="mt-1">
    <a href="/about/"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <p class="text-bg font-bg" title="">
            About
        </p>
    </a>
</li>



                    

                    
  <li class="mt-1">
    <a href="https://github.com/ZhanYirui"  target="_blank"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <div >
            

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>


        </div>
        
        <p class="text-bg font-bg" title="">
            
        </p>
    </a>
</li>



                    

                    
  <li class="mt-1">
    <a href="mailto:zhanyirui031113@gmail.com"  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
        
        <div >
            

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48H48zM0 176V384c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V176L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"/></svg>
  </span>


        </div>
        
        <p class="text-bg font-bg" title="">
            
        </p>
    </a>
</li>



                    

                </ul>
                
                

            </div>
        </label>
    </div>
</div>




<script>
    (function () {
        var $mainmenu = $('.main-menu');
        var path = window.location.pathname;
        $mainmenu.find('a[href="' + path + '"]').each(function (i, e) {
            $(e).children('p').addClass('active');
        });
    })();
</script>


  </div>
</div>
<script>
  window.addEventListener('scroll', function (e) {
    var scroll = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
    var background_blur = document.getElementById('menu-blur');
    background_blur.style.opacity = (scroll / 300);
  });
</script>

  
  <div class="relative flex flex-col grow">
    <main id="main-content" class="grow">
      


<article>
  
  
  
  
  
  
 
  
   
  
 





    
    <div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom"
    style="background-image:url(/img/background.svg);">
    


    <div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal">
    </div>
    <div
        class="absolute inset-0 opacity-60 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral-100 dark:to-neutral-800 mix-blend-normal">
    </div>
</div>

<div id="background-blur" class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl"></div>
<script>
    window.addEventListener('scroll', function (e) {
        var scroll = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
        var background_blur = document.getElementById('background-blur');
        background_blur.style.opacity = (scroll / 300)
    });
</script>

  
  

  <header id="single_header" class="mt-5 max-w-prose">
    
    <ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden">
  
  
    
  
    
  
  <li class="inline hidden">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/"
      >Enly</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="inline ">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/blogs/"
      >Blogs</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="inline hidden">
    <a
      class="hover:underline decoration-neutral-300 dark:underline-neutral-600"
      href="/blogs/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E4%B8%8A%E6%9C%BA%E4%B8%80/"
      >编译原理上机（一) - 词法分析器</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

</ol>


    
    <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
      编译原理上机（一) - 词法分析器
    </h1>
    <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
      





  
  







  















  





<div class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="2022-11-19 00:00:00 &#43;0000 UTC">2022/11/19</time><span class="px-2 text-primary-500">&middot;</span>


  
    
  
  

<span class="mb-[2px]">
  <a
    href="https://github.com/ZhanYirui/BlogSource/tree/main/blogs/%e7%bc%96%e8%af%91%e5%8e%9f%e7%90%86%e4%b8%8a%e6%9c%ba%28%e4%b8%80%29/index.md"
    class="text-lg hover:text-primary-500"
    rel="noopener noreferrer"
    target="_blank"
    title="Edit content"
    ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path fill="currentColor" d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"/></svg>
  </span>

</span></a
  >
</span>
  

  
  
</div>





<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/&#34;,'_self');">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    编译原理
  </span>
</span>
  </span>
  
  
  
  
</div>



    </div>

    
    
    
    
    

    

    
      
      
        
        
<div class="flex author">
  
    
    
      
    
    
      
        
      
      <img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width="96" height="96"
      alt="Enly" src="/img/author_photo_hudca352e3a7308a07ad6853d5ad952f53_57999_192x192_fill_q75_box_center.jpg" />
    
  
  <div class="place-self-center">
    
    <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
      Author
    </div>
    <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
      Enly
    </div>
    
    
    <div class="text-2xl sm:text-lg">
  <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://github.com/ZhanYirui"
          target="_blank"
          aria-label="Github"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="mailto:zhanyirui031113@gmail.com"
          target="_blank"
          aria-label="Envelope"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48H48zM0 176V384c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V176L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"/></svg>
  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://p.ipic.vip/5bwidi.jpg"
          target="_blank"
          aria-label="Tiktok"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://p.ipic.vip/skb3oh.jpg"
          target="_blank"
          aria-label="Comment"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 32C114.6 32 .0272 125.1 .0272 240c0 49.63 21.35 94.98 56.97 130.7c-12.5 50.37-54.27 95.27-54.77 95.77c-2.25 2.25-2.875 5.734-1.5 8.734C1.979 478.2 4.75 480 8 480c66.25 0 115.1-31.76 140.6-51.39C181.2 440.9 217.6 448 256 448c141.4 0 255.1-93.13 255.1-208S397.4 32 256 32z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://www.youtube.com/@ZhanYirui"
          target="_blank"
          aria-label="Youtube"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://www.douyin.com/user/MS4wLjABAAAA2CjxDIiYv7albPRm4M0PSkjt_m77O-fVMoXv6tYOcKk"
          target="_blank"
          aria-label="Link"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M172.5 131.1C228.1 75.51 320.5 75.51 376.1 131.1C426.1 181.1 433.5 260.8 392.4 318.3L391.3 319.9C381 334.2 361 337.6 346.7 327.3C332.3 317 328.9 297 339.2 282.7L340.3 281.1C363.2 249 359.6 205.1 331.7 177.2C300.3 145.8 249.2 145.8 217.7 177.2L105.5 289.5C73.99 320.1 73.99 372 105.5 403.5C133.3 431.4 177.3 435 209.3 412.1L210.9 410.1C225.3 400.7 245.3 404 255.5 418.4C265.8 432.8 262.5 452.8 248.1 463.1L246.5 464.2C188.1 505.3 110.2 498.7 60.21 448.8C3.741 392.3 3.741 300.7 60.21 244.3L172.5 131.1zM467.5 380C411 436.5 319.5 436.5 263 380C213 330 206.5 251.2 247.6 193.7L248.7 192.1C258.1 177.8 278.1 174.4 293.3 184.7C307.7 194.1 311.1 214.1 300.8 229.3L299.7 230.9C276.8 262.1 280.4 306.9 308.3 334.8C339.7 366.2 390.8 366.2 422.3 334.8L534.5 222.5C566 191 566 139.1 534.5 108.5C506.7 80.63 462.7 76.99 430.7 99.9L429.1 101C414.7 111.3 394.7 107.1 384.5 93.58C374.2 79.2 377.5 59.21 391.9 48.94L393.5 47.82C451 6.731 529.8 13.25 579.8 63.24C636.3 119.7 636.3 211.3 579.8 267.7L467.5 380z"/></svg>

  </span>

</span></a
        >
      
    
  </div>

</div>
  </div>
</div>

      

      

      
      <div class="mb-5"></div>
      

    

  </header>
  
  <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
    
     <div
      class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8">
      <div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-[140px]">

         <details open class="toc-right mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block">
  <summary
    class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="min-w-[220px] py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#词法分析器完整代码"><strong>词法分析器完整代码</strong></a></li>
  </ul>
</nav>
  </div>
</details>
<details class="toc-inside mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden">
  <summary
    class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#词法分析器完整代码"><strong>词法分析器完整代码</strong></a></li>
  </ul>
</nav>
  </div>
</details>


   </div>
      </div>
      

      <div class="min-w-0 min-h-0 max-w-fit">
        
        


        <div class="article-content max-w-prose mb-20">
          <p><strong>西电编译原理大作业 - 函数绘图语言编译器C++实现 - Part 1 - 词法分析器</strong></p>
<p>author : Enly</p>
<p>time : 2022-11-19</p>
<p>school : Xidian university</p>
<p><strong>写在前头:</strong></p>
<p>下面给出的代码是我第一版写出来的，勉强能符合要求。我后来进行了代码的优化和功能的添加，希望各位能够借鉴我的思路自己写一遍。</p>
<p><strong>上机目的:</strong></p>
<blockquote>
<p>例如:  ORIGIN IS (360,240); &ndash; 将原点平移到(360,240)位置</p>
<p>​      SCALE IS (100,100); // 将横坐标和纵坐标都放大100倍</p>
<p>​      SCALE IS (100,100/3); &ndash; 横坐标放大100倍，纵坐标放大100/3倍</p>
<p>​      ROT IS PI/2; // 图形逆时针旋转90度</p>
<p>​      FOR T FROM 0 TO 2PI STEP PI/50 DRAW(cos(T),sin(T)); //画圆</p>
<p>​      这是给定的一个绘图语言，有四种语句。ORIGIN语句，作用是将原点平移；SCALE语句，作用是将横纵坐标放大；ROT语句，作用是将图形旋转；FOR语句，作用是画图；还有&ndash;和//，作用是注释。</p>
</blockquote>
<blockquote>
<p>所以上机分三个部分:</p>
<p>​       (1) 词法分析器:目的是将这些语句中的单词一个个识别出来</p>
<p>​      (2) 语法分析器:目的是判断词法分析器得到的单词是否有错误，以及识别到的单词组成的语句符不符合规定</p>
<p>​      (3) 绘图器:通过识别到的语句进行画图</p>
</blockquote>
<p>




  <figure>
    <img class="my-0 rounded-md" loading="lazy" src="https://p.ipic.vip/sfw238.png" alt="img" />
    
  </figure>

</p>
<p>




  <figure>
    <img class="my-0 rounded-md" loading="lazy" src="https://p.ipic.vip/2ubtv0.png" alt="img" />
    
  </figure>

</p>
<p><strong>第一部分:词法分析器 (完整代码在结尾)</strong></p>
<blockquote>
<p>测试文本:</p>
<pre tabindex="0"><code>origin is (350,400);
scale is (10,10);
rot is pi;
for t from 0 to 2*pi step pi/10000 draw(16*sin(t)*sin(t)*sin(t),13*cos(t)-5*cos(2*t)-2*cos(3*t)-cos(4*t)); --桃心线
origin is (200,200);
scale is (100,100);
for t from 0 to 2*pi step pi/10000 draw(cos(t)*cos(t)*cos(t),sin(t)*sin(t)*sin(t)); --星型线
</code></pre></blockquote>
<p>​    




  <figure>
    <img class="my-0 rounded-md" loading="lazy" src="https://p.ipic.vip/70axzu.png" alt="img" />
    
  </figure>






  <figure>
    <img class="my-0 rounded-md" loading="lazy" src="https://p.ipic.vip/mvnnxr.png" alt="img" />
    
  </figure>

</p>
<p>词法分析器的目的说白了就是<strong>将文件中的单词一个个提取出来并分类</strong></p>
<p>比如:ORIGIN IS (360,240); 将这个句子中的单词提取出来就是ORIGIN、IS、(、360、,、240、)、;  我们将提取到的单词进行分类，比如360和240就是同一类都是常数，于是我们可以将单词的种类分为:</p>
<blockquote>
<p>​    <strong>保留字: ORIGIN,SCALE,ROT,IS,TO,STEP,DRAW,FOR,FROM,T</strong></p>
<p>​    <strong>分隔符: SEMICO</strong>(;)<strong>,L_BRACKET</strong>(()<strong>,R_BRACKET</strong>())<strong>,COMMA</strong>(,)</p>
<p>​    <strong>运算符: PLUS</strong>(+)<strong>,MINUS</strong>(-)<strong>,MUL</strong>(*)<strong>,DIV</strong>(/)<strong>,POWER</strong>(**)</p>
<p>​    <strong>参数: T</strong></p>
<p>​    <strong>函数: FUNC</strong></p>
<p>​    <strong>常数: CONST_ID</strong></p>
<p>​    <strong>结尾记号: NONTOKEN</strong></p>
<p>​    <strong>出错记号: ERRTOKEN</strong></p>
</blockquote>
<p>我们利用一个枚举enum类型来将单词的种类给装起来:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">enum</span> <span class="nc">Token_Type</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">ORIGIN</span><span class="p">,</span><span class="n">SCALE</span><span class="p">,</span><span class="n">ROT</span><span class="p">,</span><span class="n">IS</span><span class="p">,</span><span class="n">TO</span><span class="p">,</span><span class="n">STEP</span><span class="p">,</span><span class="n">DRAW</span><span class="p">,</span><span class="n">FOR</span><span class="p">,</span><span class="n">FROM</span><span class="p">,</span><span class="c1">//保留字
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">T</span><span class="p">,</span> <span class="c1">//参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">SEMICO</span><span class="p">,</span><span class="n">L_BRACKET</span><span class="p">,</span><span class="n">R_BRACKET</span><span class="p">,</span><span class="n">COMMA</span><span class="p">,</span> <span class="c1">//; ( ) ,分隔符
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">PLUS</span><span class="p">,</span><span class="n">MINUS</span><span class="p">,</span><span class="n">MUL</span><span class="p">,</span><span class="n">DIV</span><span class="p">,</span><span class="n">POWER</span><span class="p">,</span>  <span class="c1">//+ - * / **运算符
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">FUNC</span><span class="p">,</span> <span class="c1">//函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">CONST_ID</span><span class="p">,</span> <span class="c1">//常数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">NONTOKEN</span><span class="p">,</span> <span class="c1">//结尾记号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">ERRTOKEN</span> <span class="c1">//出错记号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></div><p>单词有自己的属性，上面我们用enum装起来的只是单词的一个<strong>单词种类属性</strong>，单词还有<strong>文本属性</strong>，常数还有自己的<strong>值属性</strong>，函数还有自己的<strong>函数指针属性</strong>，还有每个单词在文件中的<strong>行数属性</strong>。比如Origin这个单词，它的单词种类是ORIGIN，文本是Origin，它不是常数所以值属性规定为0，也不是函数所以函数指针设为NULL；再比如360这个单词，它的单词种类是CONST_ID，文本是360，它是常数所以值属性为360，它不是函数所以函数指针设为NULL;再比如sin这个单词，它的单词种类是FUNC，文本是sin，它不是常数所以值属性为0，它是函数所以函数指针设为sin。</p>
<p>所以我们用struct定义一个单词结构体:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">typedef</span> <span class="k">struct</span> <span class="nc">Tokens</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Token_Type</span> <span class="n">type</span><span class="p">;</span> <span class="c1">//单词种类
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">string</span> <span class="n">lexeme</span><span class="p">;</span> <span class="c1">//单词的文本
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">double</span> <span class="n">value</span><span class="p">;</span>  <span class="c1">// 常数单词的值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">double</span> <span class="p">(</span><span class="o">*</span><span class="n">FuncPtr</span><span class="p">)(</span><span class="kt">double</span><span class="p">);</span> <span class="c1">// 函数单词的函数指针
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">int</span> <span class="n">TokenLine</span><span class="p">;</span> <span class="c1">// 单词在文件中的行数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span> <span class="n">Tokens</span><span class="p">;</span>
</span></span></code></pre></div><p>这时候我们意识到一个问题，当我们在文件里识别到Origin、Scale、sin、Pi这些字符串单词的时候我们要给它归类到保留字、函数、常数等我们预先定义的单词类型，但当我们识别到abcd、xyz这些字符串单词的时候，我们要给这些单词归类到ERRTOKEN类型。所以我们需要一个单词字典，当我们识别到字符串单词的时候，要先查找这个单词字典，如果在字典里没有找到，我们就要将它们归类到ERRTOKEN类型。</p>
<p>所以我们定义一个单词字典:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">static</span> <span class="n">Tokens</span> <span class="n">TokenTab</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">ORIGIN</span><span class="p">,</span> <span class="s">&#34;ORIGIN&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">SCALE</span><span class="p">,</span> <span class="s">&#34;SCALE&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">ROT</span><span class="p">,</span> <span class="s">&#34;ROT&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">IS</span><span class="p">,</span> <span class="s">&#34;IS&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">TO</span><span class="p">,</span> <span class="s">&#34;TO&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">STEP</span><span class="p">,</span> <span class="s">&#34;STEP&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">DRAW</span><span class="p">,</span> <span class="s">&#34;DRAW&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">FOR</span><span class="p">,</span> <span class="s">&#34;FOR&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">FROM</span><span class="p">,</span> <span class="s">&#34;FROM&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">T</span><span class="p">,</span> <span class="s">&#34;T&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">FUNC</span><span class="p">,</span> <span class="s">&#34;SIN&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">sin</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">FUNC</span><span class="p">,</span> <span class="s">&#34;COS&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">cos</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">FUNC</span><span class="p">,</span> <span class="s">&#34;TAN&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">tan</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">FUNC</span><span class="p">,</span> <span class="s">&#34;LN&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">log</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">FUNC</span><span class="p">,</span> <span class="s">&#34;EXP&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">exp</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">FUNC</span><span class="p">,</span> <span class="s">&#34;SQRT&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">sqrt</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">CONST_ID</span><span class="p">,</span> <span class="s">&#34;PI&#34;</span><span class="p">,</span> <span class="n">pi</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">CONST_ID</span><span class="p">,</span> <span class="s">&#34;E&#34;</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>利用C++的类，我们定义一个Scanner类。</p>
<p>这个类里有三个成员变量:</p>
<blockquote>
<p>​    <strong>string FileName;</strong></p>
<p>​    <strong>string TokenBuffer;</strong></p>
<p>​    <strong>fstream F;</strong></p>
</blockquote>
<p>其中TokenBuffer是字符串缓冲区，因为我们<strong>读文件是利用循环一个字符一个字符地读，所以我们要有一个字符串缓冲区来将字符一个个装起来</strong>。比如文件里有个Origin单词，我们读文件时，先读到一个O字母，我们把O装到缓冲区，然后再读r字母，再装到缓冲区，以此类推，到最后读完这个单词的时候，缓冲区就装了Origin这个单词的文本值了。</p>
<p>类里还有七个成员函数:</p>
<blockquote>
<p>​    <strong>void OpenFile();</strong></p>
<p>​    <strong>void CloseFile();</strong></p>
<p>​    <strong>void EmptyBuffer();</strong></p>
<p>​    <strong>void AddCharToBuffer(char TempC);</strong></p>
<p>​    <strong>Tokens SearchCharInDict(string TempS);</strong></p>
<p>​    <strong>Tokens CreateTokens(Token_Type type,string lexeme,double value,double (*FuncPtr)(double),int Line);</strong></p>
<p>​    <strong>Tokens GetToken();</strong></p>
</blockquote>
<p>接下来我依次来说明这些成员函数的作用:</p>
<p>void OpenFile();  这个函数作用很简单，就是输入文件名后打开文件。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">OpenFile</span><span class="p">(){</span> <span class="c1">// 输入文件名打开文件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">FileName</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">F</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="n">FileName</span><span class="p">,</span><span class="n">ios</span><span class="o">::</span><span class="n">in</span><span class="o">|</span><span class="n">ios</span><span class="o">::</span><span class="n">out</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>void CloseFile();  这个函数就是关闭文件。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">CloseFile</span><span class="p">(){</span>   <span class="c1">//关闭文件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">F</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>void EmptyBuffer();  这个函数的作用是清空缓冲区，读上一个单词的时候上一个单词的文本值还在缓冲区里面，我们读下一个单词的时候就要先清空缓冲区。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">EmptyBuffer</span><span class="p">(){</span>  <span class="c1">//清空缓冲区
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">TokenBuffer</span> <span class="o">=</span> <span class="s">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>void AddCharToBuffer(char TempC);  这个函数的作用就是将一个字符装到缓冲区里面。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">AddCharToBuffer</span><span class="p">(</span><span class="kt">char</span> <span class="n">TempC</span><span class="p">){</span> <span class="c1">//将字符添加到缓冲区
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">TokenBuffer</span> <span class="o">+=</span> <span class="n">TempC</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Tokens SearchCharInDict(string TempS);  这个函数的作用是查单词字典，上面我们说过了，当我们读字符串单词的时候，要先在单词字典里面进行查找，如果没找到的话要将其归类为ERRORTOKEN类型。任务规定语言对大小写不敏感，所以Origin,origin,ORIGIN都要识别为ORIGIN类型，所以我们将存在缓冲区的单词文本值传进去的时候，将其全部转换为大写字母，我这里是利用C++自带的算法库进行大写转换的。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">Tokens</span> <span class="nf">SearchCharInDict</span><span class="p">(</span><span class="n">string</span> <span class="n">TempS</span><span class="p">){</span>  <span class="c1">//查单词字典
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Tokens</span> <span class="n">T</span> <span class="o">=</span> <span class="p">{</span><span class="n">ERRTOKEN</span><span class="p">,</span> <span class="n">TempS</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//利用C++算法库进行大写转换
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">transform</span><span class="p">(</span><span class="n">TempS</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="n">TempS</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="n">TempS</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="o">::</span><span class="n">toupper</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">18</span><span class="p">;</span> <span class="n">i</span> <span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">TempS</span> <span class="o">==</span> <span class="n">TokenTab</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">lexeme</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">T</span><span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">TokenTab</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">type</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">T</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">TokenTab</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">value</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">T</span><span class="p">.</span><span class="n">FuncPtr</span> <span class="o">=</span> <span class="n">TokenTab</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">FuncPtr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">T</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Tokens CreateTokens(Token_Type type,string lexeme,double value,double (*FuncPtr)(double),int Line);  这个函数作用是传入单词的各个属性，返回一个单词，因为底下GetToken()函数在生成单词时有很多重复代码，所以就专门写了个函数进行单词生成。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">Tokens</span> <span class="nf">CreateToken</span><span class="p">(</span><span class="n">Token_Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">string</span> <span class="n">lexeme</span><span class="p">,</span> <span class="kt">double</span> <span class="n">value</span><span class="p">,</span> <span class="kt">double</span> <span class="p">(</span><span class="o">*</span><span class="n">FuncPtr</span><span class="p">)(</span><span class="kt">double</span><span class="p">),</span> <span class="kt">int</span> <span class="n">Line</span><span class="p">){</span>    <span class="c1">// 生成单词
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Tokens</span> <span class="n">TempToken</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">TempToken</span><span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">type</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">TempToken</span><span class="p">.</span><span class="n">lexeme</span> <span class="o">=</span> <span class="n">lexeme</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">TempToken</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">TempToken</span><span class="p">.</span><span class="n">FuncPtr</span> <span class="o">=</span> <span class="n">FuncPtr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">TempToken</span><span class="p">.</span><span class="n">TokenLine</span> <span class="o">=</span> <span class="n">Line</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">TempToken</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Tokens GetToken();  这个函数是Scanner类最核心的成员函数，作用是获取文件中的一个单词。</p>
<p>设计思路:我们读文件是一个字符一个字符地读。所以我们根据读到的字符进行不同的设计。</p>
<blockquote>
<p>​    <strong>当我们读到的字符是文件结尾字符 &lsquo;EOF&rsquo; 的时候，我们返回一个类型为NONTOKEN的单词。</strong></p>
<p>​    <strong>当我们读到的字符是空格 &rsquo; &rsquo; 或者制表符 &lsquo;\t&rsquo; 的时候，不作处理，继续读下一个字符。</strong></p>
<p>​    <strong>当我们读到的字符是换行符 &lsquo;\n&rsquo; 的时候，我们将行数加1，然后继续读下一个字符。</strong></p>
<p>​    <strong>当我们读到的字符是字母 &lsquo;[a-zA-Z]&rsquo; 的时候，我们将字符装到缓冲区，然后读下一个字符，如果下一个字符还是字母，那就继续装到缓冲区，直到读的字符不是字母为止，这个时候缓冲区里面装的就是单词的文本值了。然后查单词字典，是预设的单词的话就返回一个预设的单词，不然就返回一个类型为ERRTOKEN的单词。</strong></p>
<p>​    <strong>当我们读到的字符是数字 &lsquo;[0-9]&rsquo; 的时候，我们将字符装到缓冲区，然后读下一个字符，如果下一个字符还是数字，就继续装到缓冲区，直到读的字符不是数字为止。由于数字还能有小数，所以这时候如果读的字符是小数点 &lsquo;.&rsquo; ，那就继续装到缓冲区，然后读下一个字符，如果是数字就装到缓冲区，直到读的字符不是数字为止，这个时候缓冲区里面就是常数的文本值。最后返回一个类型为CONST_ID，值属性为利用stod()函数转换缓冲区里的文本值为常数值 的单词。</strong></p>
<p>​    <strong>当我们读到的字符是分号 &lsquo;;&rsquo; 的时候，返回一个类型为SEMICO的单词。</strong></p>
<p>​    <strong>当我们读到的字符是左括号 &lsquo;(&rsquo; 的时候，返回一个类型为L_BRACKET单词。</strong></p>
<p>​    <strong>当我们读到的字符是分号右括号 &lsquo;)&rsquo; 的时候，返回一个类型为R_BRACKET的单词。</strong></p>
<p>​    <strong>当我们读到的字符是逗号 &lsquo;,&rsquo; 的时候，返回一个类型为COMMA的单词。</strong></p>
<p>​    <strong>当我们读到的字符是加号 &lsquo;+&rsquo; 的时候，返回一个类型为PLUS的单词。</strong></p>
<p>​    <strong>当我们读到的字符是减号 &lsquo;-&rsquo; 的时候，由于 &ndash; 是注释，我们需要继续读下一个字符，如果下一个字符不是 &lsquo;-&rsquo;，那么我们返回一个类型为MINUS的单词，如果下一个字符是 &lsquo;-&rsquo;，我们就要继续往后读，直到读的字符是换行符 &lsquo;\n&rsquo; 或者结束符 &lsquo;EOF&rsquo; 的时候结束，要是读的是 &lsquo;\n&rsquo;就将行数加1然后继续下一个循环，要是读的是 &lsquo;EOF&rsquo; 就返回一个类型为NONTOKEN的单词。</strong></p>
<p>​    <strong>当我们读到的字符是除号 &lsquo;/&rsquo; 的时候，跟读减号 &lsquo;-&rsquo; 的方法一样</strong></p>
<p>​    <em><em>当我们读到的字符是乘号 &lsquo;*&rsquo; 的时候，由于 *</em> 是幂次运算，我们需要继续读下一个字符，如果下一个字符不是 &lsquo;*&rsquo;，那么我们返回一个类型为MUL的单词，如果下一个字符是 &lsquo;*&rsquo;，我们就返回一个类型为POWER的单词。</em>*</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">Tokens</span> <span class="nf">GetToken</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="kt">char</span> <span class="n">c</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="kt">int</span> <span class="n">line</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">//行数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Tokens</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">EmptyBuffer</span><span class="p">();</span>   <span class="c1">//清空缓冲区
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">c</span> <span class="o">=</span> <span class="n">F</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="n">EOF</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">NONTOKEN</span><span class="p">,</span><span class="s">&#34;EOF&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span> <span class="o">||</span> <span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;\t&#39;</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;\n&#39;</span><span class="p">){</span> <span class="n">line</span><span class="o">++</span><span class="p">;</span> <span class="k">continue</span><span class="p">;}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">isalpha</span><span class="p">(</span><span class="n">c</span><span class="p">)){</span>
</span></span><span class="line"><span class="cl">                <span class="n">AddCharToBuffer</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                    <span class="n">c</span> <span class="o">=</span> <span class="n">F</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span><span class="p">(</span><span class="n">isalnum</span><span class="p">(</span><span class="n">c</span><span class="p">))</span> <span class="n">AddCharToBuffer</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">else</span> <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="n">F</span><span class="p">.</span><span class="n">putback</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">TempT</span> <span class="o">=</span> <span class="n">SearchCharInDict</span><span class="p">(</span><span class="n">TokenBuffer</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">TempT</span><span class="p">.</span><span class="n">TokenLine</span> <span class="o">=</span> <span class="n">line</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">c</span><span class="p">)){</span>
</span></span><span class="line"><span class="cl">                <span class="n">AddCharToBuffer</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                    <span class="n">c</span> <span class="o">=</span> <span class="n">F</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span><span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">c</span><span class="p">))</span> <span class="n">AddCharToBuffer</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">else</span> <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;.&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">AddCharToBuffer</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                        <span class="n">c</span> <span class="o">=</span> <span class="n">F</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                        <span class="k">if</span><span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">c</span><span class="p">))</span> <span class="n">AddCharToBuffer</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                        <span class="k">else</span> <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="n">F</span><span class="p">.</span><span class="n">putback</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">CONST_ID</span><span class="p">,</span><span class="n">TokenBuffer</span><span class="p">,</span> <span class="n">stod</span><span class="p">(</span><span class="n">TokenBuffer</span><span class="p">),</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;;&#39;</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">SEMICO</span><span class="p">,</span><span class="s">&#34;;&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;(&#39;</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">L_BRACKET</span><span class="p">,</span><span class="s">&#34;(&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;)&#39;</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">R_BRACKET</span><span class="p">,</span><span class="s">&#34;)&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;,&#39;</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">COMMA</span><span class="p">,</span><span class="s">&#34;,&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;+&#39;</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">PLUS</span><span class="p">,</span><span class="s">&#34;+&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;-&#39;</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="n">c</span> <span class="o">=</span> <span class="n">F</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;-&#39;</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                    <span class="k">while</span><span class="p">(</span><span class="n">c</span><span class="o">!=</span><span class="sc">&#39;\n&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="o">!=</span><span class="n">EOF</span><span class="p">)</span> <span class="n">c</span> <span class="o">=</span> <span class="n">F</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="n">EOF</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                        <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">NONTOKEN</span><span class="p">,</span><span class="s">&#34;EOF&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                        <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                    <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="n">line</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                        <span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">F</span><span class="p">.</span><span class="n">putback</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">MINUS</span><span class="p">,</span><span class="s">&#34;-&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;/&#39;</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="n">c</span> <span class="o">=</span> <span class="n">F</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;/&#39;</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                    <span class="k">while</span><span class="p">(</span><span class="n">c</span><span class="o">!=</span><span class="sc">&#39;\n&#39;</span><span class="o">&amp;&amp;</span><span class="n">c</span><span class="o">!=</span><span class="n">EOF</span><span class="p">)</span> <span class="n">c</span> <span class="o">=</span> <span class="n">F</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="n">EOF</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                        <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">NONTOKEN</span><span class="p">,</span><span class="s">&#34;EOF&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                        <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                    <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="n">line</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                        <span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">F</span><span class="p">.</span><span class="n">putback</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">DIV</span><span class="p">,</span><span class="s">&#34;/&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;*&#39;</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="n">c</span> <span class="o">=</span> <span class="n">F</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;*&#39;</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                    <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">POWER</span><span class="p">,</span><span class="s">&#34;**&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">F</span><span class="p">.</span><span class="n">putback</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">MUL</span><span class="p">,</span><span class="s">&#34;*&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">ERRTOKEN</span><span class="p">,</span><span class="s">&#34;EOF&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Scanner类我们就已经设计好了，这个时候我选择用一个循环反复调用GetToken()函数将文件里面的所有单词存放到一个容器里面，后面设计语法分析器的时候就可以直接从容器里面取了，不过这也是看个人喜好，用一次调一次GetToken()函数也可以。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">vector</span><span class="o">&lt;</span><span class="n">Tokens</span><span class="o">&gt;</span> <span class="n">TokenStream</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">LoadFileTokens</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Scanner</span> <span class="n">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Tokens</span> <span class="n">t</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Please Enter A File With Path:&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">s</span><span class="p">.</span><span class="n">OpenFile</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">t</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">GetToken</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">TokenStream</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">t</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">type</span> <span class="o">!=</span> <span class="n">NONTOKEN</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">t</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">GetToken</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">TokenStream</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">t</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">s</span><span class="p">.</span><span class="n">CloseFile</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>再然后就是打印所有单词了，就不写了，直接放到完整代码里面，词法分析器部分就结束了。</p>


<h2 class="relative group"><strong>词法分析器完整代码</strong> 
    <div id="%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90%E5%99%A8%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90%E5%99%A8%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cmath&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;cctype&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;fstream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;algorithm&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iomanip&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#define pi acos(-1.0)
</span></span></span><span class="line"><span class="cl"><span class="cp">#define e exp(1.0)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">enum</span> <span class="nc">Token_Type</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">ORIGIN</span><span class="p">,</span><span class="n">SCALE</span><span class="p">,</span><span class="n">ROT</span><span class="p">,</span><span class="n">IS</span><span class="p">,</span><span class="n">TO</span><span class="p">,</span><span class="n">STEP</span><span class="p">,</span><span class="n">DRAW</span><span class="p">,</span><span class="n">FOR</span><span class="p">,</span><span class="n">FROM</span><span class="p">,</span><span class="c1">//保留字
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">T</span><span class="p">,</span> <span class="c1">//参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">SEMICO</span><span class="p">,</span><span class="n">L_BRACKET</span><span class="p">,</span><span class="n">R_BRACKET</span><span class="p">,</span><span class="n">COMMA</span><span class="p">,</span> <span class="c1">//; ( ) ,分隔符
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">PLUS</span><span class="p">,</span><span class="n">MINUS</span><span class="p">,</span><span class="n">MUL</span><span class="p">,</span><span class="n">DIV</span><span class="p">,</span><span class="n">POWER</span><span class="p">,</span>  <span class="c1">//+ - * / **运算符
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">FUNC</span><span class="p">,</span> <span class="c1">//函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">CONST_ID</span><span class="p">,</span> <span class="c1">//常数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">NONTOKEN</span><span class="p">,</span> <span class="c1">//空记号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">ERRTOKEN</span> <span class="c1">//出错记号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">typedef</span> <span class="k">struct</span> <span class="nc">Tokens</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Token_Type</span> <span class="n">type</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">string</span> <span class="n">lexeme</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">value</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="p">(</span><span class="o">*</span><span class="n">FuncPtr</span><span class="p">)(</span><span class="kt">double</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">TokenLine</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="n">Tokens</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">static</span> <span class="n">Tokens</span> <span class="n">TokenTab</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">ORIGIN</span><span class="p">,</span> <span class="s">&#34;ORIGIN&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">SCALE</span><span class="p">,</span> <span class="s">&#34;SCALE&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">ROT</span><span class="p">,</span> <span class="s">&#34;ROT&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">IS</span><span class="p">,</span> <span class="s">&#34;IS&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">TO</span><span class="p">,</span> <span class="s">&#34;TO&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">STEP</span><span class="p">,</span> <span class="s">&#34;STEP&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">DRAW</span><span class="p">,</span> <span class="s">&#34;DRAW&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">FOR</span><span class="p">,</span> <span class="s">&#34;FOR&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">FROM</span><span class="p">,</span> <span class="s">&#34;FROM&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">T</span><span class="p">,</span> <span class="s">&#34;T&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">FUNC</span><span class="p">,</span> <span class="s">&#34;SIN&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">sin</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">FUNC</span><span class="p">,</span> <span class="s">&#34;COS&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">cos</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">FUNC</span><span class="p">,</span> <span class="s">&#34;TAN&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">tan</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">FUNC</span><span class="p">,</span> <span class="s">&#34;LN&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">log</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">FUNC</span><span class="p">,</span> <span class="s">&#34;EXP&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">exp</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">FUNC</span><span class="p">,</span> <span class="s">&#34;SQRT&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">sqrt</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">CONST_ID</span><span class="p">,</span> <span class="s">&#34;PI&#34;</span><span class="p">,</span> <span class="n">pi</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="n">CONST_ID</span><span class="p">,</span> <span class="s">&#34;E&#34;</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Scanner</span><span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="n">OpenFile</span><span class="p">(){</span> <span class="c1">//打开文件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">FileName</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">F</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="n">FileName</span><span class="p">,</span><span class="n">ios</span><span class="o">::</span><span class="n">in</span><span class="o">|</span><span class="n">ios</span><span class="o">::</span><span class="n">out</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">CloseFile</span><span class="p">(){</span> <span class="c1">//关闭文件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">F</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">EmptyBuffer</span><span class="p">(){</span> <span class="c1">//清空缓冲区
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">TokenBuffer</span> <span class="o">=</span> <span class="s">&#34;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="kt">void</span> <span class="nf">AddCharToBuffer</span><span class="p">(</span><span class="kt">char</span> <span class="n">TempC</span><span class="p">){</span> <span class="c1">//将字符添加到缓冲区
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">TokenBuffer</span> <span class="o">+=</span> <span class="n">TempC</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">Tokens</span> <span class="nf">SearchCharInDict</span><span class="p">(</span><span class="n">string</span> <span class="n">TempS</span><span class="p">){</span> <span class="c1">//查字典
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Tokens</span> <span class="n">T</span> <span class="o">=</span> <span class="p">{</span><span class="n">ERRTOKEN</span><span class="p">,</span> <span class="n">TempS</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">        <span class="n">transform</span><span class="p">(</span><span class="n">TempS</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="n">TempS</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="n">TempS</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="o">::</span><span class="n">toupper</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">18</span><span class="p">;</span> <span class="n">i</span> <span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">TempS</span> <span class="o">==</span> <span class="n">TokenTab</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">lexeme</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="n">T</span><span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">TokenTab</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">type</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">T</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">TokenTab</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">value</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">T</span><span class="p">.</span><span class="n">FuncPtr</span> <span class="o">=</span> <span class="n">TokenTab</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">FuncPtr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">T</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">Tokens</span> <span class="nf">CreateToken</span><span class="p">(</span><span class="n">Token_Type</span> <span class="n">type</span><span class="p">,</span> <span class="n">string</span> <span class="n">lexeme</span><span class="p">,</span> <span class="kt">double</span> <span class="n">value</span><span class="p">,</span> <span class="kt">double</span> <span class="p">(</span><span class="o">*</span><span class="n">FuncPtr</span><span class="p">)(</span><span class="kt">double</span><span class="p">),</span> <span class="kt">int</span> <span class="n">Line</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">Tokens</span> <span class="n">TempToken</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">TempToken</span><span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">type</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">TempToken</span><span class="p">.</span><span class="n">lexeme</span> <span class="o">=</span> <span class="n">lexeme</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">TempToken</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">TempToken</span><span class="p">.</span><span class="n">FuncPtr</span> <span class="o">=</span> <span class="n">FuncPtr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">TempToken</span><span class="p">.</span><span class="n">TokenLine</span> <span class="o">=</span> <span class="n">Line</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">TempToken</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">Tokens</span> <span class="nf">GetToken</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="kt">char</span> <span class="n">c</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">static</span> <span class="kt">int</span> <span class="n">line</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">//行数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">Tokens</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">EmptyBuffer</span><span class="p">();</span>   <span class="c1">//清空缓冲区
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">c</span> <span class="o">=</span> <span class="n">F</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="n">EOF</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">NONTOKEN</span><span class="p">,</span><span class="s">&#34;EOF&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span> <span class="o">||</span> <span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;\t&#39;</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;\n&#39;</span><span class="p">){</span> <span class="n">line</span><span class="o">++</span><span class="p">;</span> <span class="k">continue</span><span class="p">;}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">isalpha</span><span class="p">(</span><span class="n">c</span><span class="p">)){</span>
</span></span><span class="line"><span class="cl">                <span class="n">AddCharToBuffer</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                    <span class="n">c</span> <span class="o">=</span> <span class="n">F</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span><span class="p">(</span><span class="n">isalnum</span><span class="p">(</span><span class="n">c</span><span class="p">))</span> <span class="n">AddCharToBuffer</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">else</span> <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="n">F</span><span class="p">.</span><span class="n">putback</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">TempT</span> <span class="o">=</span> <span class="n">SearchCharInDict</span><span class="p">(</span><span class="n">TokenBuffer</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">TempT</span><span class="p">.</span><span class="n">TokenLine</span> <span class="o">=</span> <span class="n">line</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">c</span><span class="p">)){</span>
</span></span><span class="line"><span class="cl">                <span class="n">AddCharToBuffer</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                    <span class="n">c</span> <span class="o">=</span> <span class="n">F</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span><span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">c</span><span class="p">))</span> <span class="n">AddCharToBuffer</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">else</span> <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;.&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">AddCharToBuffer</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                        <span class="n">c</span> <span class="o">=</span> <span class="n">F</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                        <span class="k">if</span><span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">c</span><span class="p">))</span> <span class="n">AddCharToBuffer</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                        <span class="k">else</span> <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="n">F</span><span class="p">.</span><span class="n">putback</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">CONST_ID</span><span class="p">,</span><span class="n">TokenBuffer</span><span class="p">,</span> <span class="n">stod</span><span class="p">(</span><span class="n">TokenBuffer</span><span class="p">),</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;;&#39;</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">SEMICO</span><span class="p">,</span><span class="s">&#34;;&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;(&#39;</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">L_BRACKET</span><span class="p">,</span><span class="s">&#34;(&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;)&#39;</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">R_BRACKET</span><span class="p">,</span><span class="s">&#34;)&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;,&#39;</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">COMMA</span><span class="p">,</span><span class="s">&#34;,&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;+&#39;</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">PLUS</span><span class="p">,</span><span class="s">&#34;+&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;-&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">c</span> <span class="o">=</span> <span class="n">F</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;-&#39;</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                    <span class="k">while</span><span class="p">(</span><span class="n">c</span><span class="o">!=</span><span class="sc">&#39;\n&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">c</span><span class="o">!=</span><span class="n">EOF</span><span class="p">)</span> <span class="n">c</span> <span class="o">=</span> <span class="n">F</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="n">EOF</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                        <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">NONTOKEN</span><span class="p">,</span><span class="s">&#34;EOF&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                        <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                    <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="n">line</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                        <span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">F</span><span class="p">.</span><span class="n">putback</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">MINUS</span><span class="p">,</span><span class="s">&#34;-&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;/&#39;</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="n">c</span> <span class="o">=</span> <span class="n">F</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;/&#39;</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                    <span class="k">while</span><span class="p">(</span><span class="n">c</span><span class="o">!=</span><span class="sc">&#39;\n&#39;</span><span class="o">&amp;&amp;</span><span class="n">c</span><span class="o">!=</span><span class="n">EOF</span><span class="p">)</span> <span class="n">c</span> <span class="o">=</span> <span class="n">F</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="n">EOF</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                        <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">NONTOKEN</span><span class="p">,</span><span class="s">&#34;EOF&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                        <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                    <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="n">line</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                        <span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">F</span><span class="p">.</span><span class="n">putback</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">DIV</span><span class="p">,</span><span class="s">&#34;/&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;*&#39;</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="n">c</span> <span class="o">=</span> <span class="n">F</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span><span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;*&#39;</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                    <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">POWER</span><span class="p">,</span><span class="s">&#34;**&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">F</span><span class="p">.</span><span class="n">putback</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">MUL</span><span class="p">,</span><span class="s">&#34;*&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">TempT</span> <span class="o">=</span> <span class="n">CreateToken</span><span class="p">(</span><span class="n">ERRTOKEN</span><span class="p">,</span><span class="s">&#34;EOF&#34;</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="n">line</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">TempT</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">string</span> <span class="n">FileName</span><span class="p">,</span> <span class="n">TokenBuffer</span> <span class="o">=</span> <span class="s">&#34;&#34;</span><span class="p">;</span> <span class="c1">//文件名和缓冲区
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">fstream</span> <span class="n">F</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">vector</span><span class="o">&lt;</span><span class="n">Tokens</span><span class="o">&gt;</span> <span class="n">TokenStream</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">LoadFileTokens</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="n">Scanner</span> <span class="n">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Tokens</span> <span class="n">t</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Please Enter A File With Path:&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">s</span><span class="p">.</span><span class="n">OpenFile</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">t</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">GetToken</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">TokenStream</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">t</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">type</span> <span class="o">!=</span> <span class="n">NONTOKEN</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">t</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">GetToken</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">TokenStream</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">t</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">s</span><span class="p">.</span><span class="n">CloseFile</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">Cout</span><span class="p">(</span><span class="n">string</span> <span class="n">type</span><span class="p">,</span> <span class="n">string</span> <span class="n">lexeme</span><span class="p">,</span> <span class="kt">double</span> <span class="n">value</span><span class="p">,</span> <span class="n">string</span> <span class="n">funcptr</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">left</span> <span class="o">&lt;&lt;</span> <span class="n">setw</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">type</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;</span><span class="se">\t</span><span class="s">|</span><span class="se">\t</span><span class="s">&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">setw</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">lexeme</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;</span><span class="se">\t</span><span class="s">|</span><span class="se">\t</span><span class="s">&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">setw</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">value</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;</span><span class="se">\t</span><span class="s">|</span><span class="se">\t</span><span class="s">&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">setw</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">funcptr</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">COUT</span><span class="p">(</span><span class="n">Tokens</span> <span class="n">t</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">     <span class="k">switch</span> <span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">type</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">ORIGIN</span><span class="p">:</span><span class="n">Cout</span><span class="p">(</span><span class="s">&#34;ORIGIN&#34;</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">lexeme</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="s">&#34;NULL&#34;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">SCALE</span><span class="p">:</span><span class="n">Cout</span><span class="p">(</span><span class="s">&#34;SCALE&#34;</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">lexeme</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="s">&#34;NULL&#34;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">ROT</span><span class="p">:</span><span class="n">Cout</span><span class="p">(</span><span class="s">&#34;ROT&#34;</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">lexeme</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="s">&#34;NULL&#34;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">IS</span><span class="p">:</span><span class="n">Cout</span><span class="p">(</span><span class="s">&#34;IS&#34;</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">lexeme</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="s">&#34;NULL&#34;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">TO</span><span class="p">:</span><span class="n">Cout</span><span class="p">(</span><span class="s">&#34;TO&#34;</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">lexeme</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="s">&#34;NULL&#34;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">STEP</span><span class="p">:</span><span class="n">Cout</span><span class="p">(</span><span class="s">&#34;STEP&#34;</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">lexeme</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="s">&#34;NULL&#34;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">DRAW</span><span class="p">:</span><span class="n">Cout</span><span class="p">(</span><span class="s">&#34;DRAW&#34;</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">lexeme</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="s">&#34;NULL&#34;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">FOR</span><span class="p">:</span><span class="n">Cout</span><span class="p">(</span><span class="s">&#34;FOR&#34;</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">lexeme</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="s">&#34;NULL&#34;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">FROM</span><span class="p">:</span><span class="n">Cout</span><span class="p">(</span><span class="s">&#34;FROM&#34;</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">lexeme</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="s">&#34;NULL&#34;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">T</span><span class="p">:</span><span class="n">Cout</span><span class="p">(</span><span class="s">&#34;T&#34;</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">lexeme</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="s">&#34;NULL&#34;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">SEMICO</span><span class="p">:</span><span class="n">Cout</span><span class="p">(</span><span class="s">&#34;SEMICO&#34;</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">lexeme</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="s">&#34;NULL&#34;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">L_BRACKET</span><span class="p">:</span><span class="n">Cout</span><span class="p">(</span><span class="s">&#34;L_BRACKET&#34;</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">lexeme</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="s">&#34;NULL&#34;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">R_BRACKET</span><span class="p">:</span><span class="n">Cout</span><span class="p">(</span><span class="s">&#34;R_BRACKET&#34;</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">lexeme</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="s">&#34;NULL&#34;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">COMMA</span><span class="p">:</span><span class="n">Cout</span><span class="p">(</span><span class="s">&#34;COMMA&#34;</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">lexeme</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="s">&#34;NULL&#34;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">PLUS</span><span class="p">:</span><span class="n">Cout</span><span class="p">(</span><span class="s">&#34;PLUS&#34;</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">lexeme</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="s">&#34;NULL&#34;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">MINUS</span><span class="p">:</span><span class="n">Cout</span><span class="p">(</span><span class="s">&#34;MINUS&#34;</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">lexeme</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="s">&#34;NULL&#34;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">MUL</span><span class="p">:</span><span class="n">Cout</span><span class="p">(</span><span class="s">&#34;MUL&#34;</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">lexeme</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="s">&#34;NULL&#34;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">DIV</span><span class="p">:</span><span class="n">Cout</span><span class="p">(</span><span class="s">&#34;DIV&#34;</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">lexeme</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="s">&#34;NULL&#34;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">POWER</span><span class="p">:</span><span class="n">Cout</span><span class="p">(</span><span class="s">&#34;POWER&#34;</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">lexeme</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="s">&#34;NULL&#34;</span><span class="p">);</span><span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">FUNC</span><span class="p">:{</span>
</span></span><span class="line"><span class="cl">             <span class="n">string</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">t</span><span class="p">.</span><span class="n">lexeme</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">             <span class="n">transform</span><span class="p">(</span><span class="n">temp</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="n">temp</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="n">temp</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="o">::</span><span class="n">toupper</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">             <span class="n">Cout</span><span class="p">(</span><span class="s">&#34;FUNC&#34;</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">lexeme</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="n">temp</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">         <span class="p">};</span><span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">CONST_ID</span><span class="p">:</span><span class="n">Cout</span><span class="p">(</span><span class="s">&#34;CONST_ID&#34;</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">lexeme</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="s">&#34;NULL&#34;</span><span class="p">);;</span><span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">NONTOKEN</span><span class="p">:</span><span class="n">Cout</span><span class="p">(</span><span class="s">&#34;NONTOKEN&#34;</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">lexeme</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="s">&#34;NULL&#34;</span><span class="p">);;</span><span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">         <span class="k">case</span> <span class="nl">ERRTOKEN</span><span class="p">:</span><span class="n">Cout</span><span class="p">(</span><span class="s">&#34;ERRTOKEN&#34;</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">lexeme</span><span class="p">,</span><span class="n">t</span><span class="p">.</span><span class="n">value</span><span class="p">,</span><span class="s">&#34;NULL&#34;</span><span class="p">);;</span><span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">     <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">LoadFileTokens</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">left</span> <span class="o">&lt;&lt;</span> <span class="n">setw</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Token_Type&#34;</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;</span><span class="se">\t</span><span class="s"> </span><span class="se">\t</span><span class="s">&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">setw</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;String_Value&#34;</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;</span><span class="se">\t</span><span class="s"> </span><span class="se">\t</span><span class="s">&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">setw</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Constant_Value&#34;</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;</span><span class="se">\t</span><span class="s"> </span><span class="se">\t</span><span class="s">&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">setw</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Function_Pointer&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;-------------------------------------------------------------------------------------&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">TokenStream</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span> <span class="o">++</span><span class="p">)</span> <span class="n">COUT</span><span class="p">(</span><span class="n">TokenStream</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div>
        </div>
        
        

        
        

          
      </div>
     
      
      
        
        
          
          
        
      <script>
        var oid = "views_blogs\/编译原理上机(一)\/index.md"
        var oid_likes = "likes_blogs\/编译原理上机(一)\/index.md"
      </script>
      
      
      
      <script type="text/javascript" src="/js/page.min.0860cf4e04fa2d72cc33ddba263083464d48f67de06114529043cb4623319efed4f484fd7f1730df5abea0e2da6f3538855634081d02f2d6e920b956f063e823.js" integrity="sha512-CGDPTgT6LXLMM926JjCDRk1I9n3gYRRSkEPLRiMxnv7U9IT9fxcw31q&#43;oOLabzU4hVY0CB0C8tbpILlW8GPoIw=="></script>
  
    </section>
  <footer class="pt-8 max-w-prose print:hidden">

    
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="flex justify-between pt-3">
        <span>
          
        </span>
        <span>
          
            <a class="flex text-right group ml-3" href="/blogs/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E4%B8%8A%E6%9C%BA%E4%BA%8C/">
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >编译原理上机(二) — 语法分析器</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2022-11-20 00:00:00 &#43;0000 UTC">2022/11/20</time>
                  
                </span>
              </span>
              <span
                class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span
                class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400"
                >&larr;</span
              >
            </a>
          
        </span>
      </div>
    </div>
  


    
  </footer>
</article>

      <div id="top-scroller" class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0">
  <a href="#the-top"
    class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="Scroll to top" title="Scroll to top">
    &uarr;
  </a>
</div>
    </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
    <nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400">
      <ul class="flex flex-col list-none sm:flex-row">
        
        <li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
          <a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href="/tags/"
            title="">
            
            Tags
          </a>
        </li>
        
      </ul>
    </nav>
    
  
  <div class="flex items-center justify-between">

    
    
    <p class="text-sm text-neutral-500 dark:text-neutral-400">
      Copyright © 2024 Enly
    </p>
    

    
    

  </div>
  <script>
    
    mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
      margin: 24,
      background: 'rgba(0,0,0,0.5)',
      scrollOffset: 0,
    })
    
  </script>
  
  
  <script type="text/javascript" src="/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js" integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh&#43;sCQ0E53ghYrxgYqw&#43;0GCRyIEpA=="></script>
  
  
</footer>
  </div>
</body>

</html>
